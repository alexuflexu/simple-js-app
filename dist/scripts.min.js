let pokemonRepository = (function () {
  let t = [];
  function e(t) {
    let e = t.detailsUrl;
    return fetch(e)
      .then(function (t) {
        return t.json();
      })
      .then(function (e) {
        (t.imageUrl = e.sprites.front_default),
          (t.height = e.height),
          (t.types = e.types);
      })
      .catch(function (t) {
        console.error(t);
      });
  }
  function n(t) {
    e(t).then(function () {
      let e = document.querySelector('.modal-body');
      e.innerHTML = '';
      let n = document.createElement('p');
      n.textContent = 'Height: ' + t.height;
      let o = document.createElement('img');
      (o.src = t.imageUrl),
        (o.alt = t.name),
        e.appendChild(n),
        e.appendChild(o),
        (document.querySelector('#pokemonModalLabel').textContent = t.name);
      let l = document.querySelector('#pokemonModal');
      l.classList.add('show'),
        (l.style.display = 'block'),
        l.setAttribute('aria-modal', 'true'),
        l.setAttribute('role', 'dialog');
    });
  }
  return {
    getAll: function () {
      return t;
    },
    add: function (e) {
      t.push(e);
    },
    addListItem: function (t) {
      let e = document.querySelector('.pokemon-list'),
        o = document.createElement('li');
      o.classList.add('list-group-item');
      let l = document.createElement('button');
      (l.innerText = t.name),
        l.classList.add('custom-button', 'btn', 'btn-primary'),
        l.setAttribute('data-toggle', 'modal'),
        l.setAttribute('data-target', '#pokemonModal'),
        o.appendChild(l),
        e.appendChild(o),
        l.addEventListener('click', function (e) {
          n(t);
        });
    },
    loadList: function () {
      return fetch('https://pokeapi.co/api/v2/pokemon/?limit=150')
        .then(function (t) {
          return t.json();
        })
        .then(function (e) {
          e.results.forEach(function (e) {
            let n = { name: e.name, detailsUrl: e.url };
            !(function (e) {
              'object' == typeof e && 'name' in e
                ? t.push(e)
                : console.log('Error');
            })(n),
              console.log(n);
          });
        })
        .catch(function (t) {
          console.error(t);
        });
    },
    loadDetails: e,
    showDetails: n,
  };
})();
pokemonRepository.loadList().then(function () {
  pokemonRepository.getAll().forEach(function (t) {
    pokemonRepository.addListItem(t);
  });
});
